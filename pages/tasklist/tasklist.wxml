<!--pages/tasklist/tasklist.wxml-->
<import src="../../components/cascaded-picker-view/cascaded-picker-view.wxml" />

<view class="page" bindtap="hidePicker">

<view class="swiper bg" wx:if="{{menu == 3}}">
  <view class="{{tab == 0 ? 'active' : 'inactive'}}" bindtap="switchTab" data-tab="0">
    <text>待处理</text>
    <text class="co-red">{{reportInfo.data_4}}</text>
  </view>
  <view class="{{tab == 1 ? 'active' : 'inactive'}}" bindtap="switchTab" data-tab="1">
    <text>已回复</text>
    <text class="co-red">{{reportInfo.data_5}}</text>
  </view>
  <view class="{{tab == 2 ? 'active' : 'inactive'}}" bindtap="switchTab" data-tab="2">
    <text>抄送我的</text>
    <text class="co-red">{{reportInfo.data_6}}</text>
  </view>
  <view class="{{tab == 3 ? 'active' : 'inactive'}}" bindtap="switchTab" data-tab="3">
    <text>已解决</text>
    <text class="co-red">{{reportInfo.data_7}}</text>
  </view>
</view>


<view class="swiper bg" wx:if="{{menu == 4}}">
  <view class="{{tab == 0 ? 'active' : 'inactive'}}" bindtap="switchTab" data-tab="0">
    <text>已发布</text>
    <text class="co-red">{{reportInfo.data_1}}</text>
  </view>
  <view class="{{tab == 1 ? 'active' : 'inactive'}}" bindtap="switchTab" data-tab="1">
    <text>收到回复</text>
    <text class="co-red">{{reportInfo.data_2}}</text>
  </view>
  <view class="{{tab == 2 ? 'active' : 'inactive'}}" bindtap="switchTab" data-tab="2">
    <text>已解决</text>
    <text class="co-red">{{reportInfo.data_3}}</text>
  </view>
</view>

<view class="swiper bg" wx:if="{{menu == 6}}">
  <view class="{{tab == 0 ? 'active' : 'inactive'}}" bindtap="switchTab" data-tab="0">
    <text>待处理</text>
    <text class="co-red">{{reportInfo.data_8}}</text>
  </view>
  <view class="{{tab == 1 ? 'active' : 'inactive'}}" bindtap="switchTab" data-tab="1">
    <text>已回复</text>
    <text class="co-red">{{reportInfo.data_9}}</text>
  </view>
  <view class="{{tab == 2 ? 'active' : 'inactive'}}" bindtap="switchTab" data-tab="2">
    <text>已解决</text>
    <text class="co-red">{{reportInfo.data_10}}</text>
  </view>
</view>

<view class="page-wrapper">
  <view class="nav-wrapper">
    <view class="nav">
      <view class="region" catchtap="showPicker" hover-stop-propagation="true">
        <view class="picker">
          <text>{{nextListMap[departId].text || '请选择公司'}}</text>
          <image src="/imgs/down.png"></image>
        </view>
      </view>
    </view>
    <view class="nav">
      <view class="project">
        <picker bindchange="bindProjectChange" value="{{proIdx}}" range="{{projectList}}" range-key="name">
          <view class="picker">
            <text>{{projectList[proIdx].name}}</text>
            <image src="/imgs/down.png"></image>
          </view>
        </picker>
      </view>
    </view>
    <view class="nav">
      <view class="system">
        <picker bindchange="bindSystemChange" value="{{sysIdx}}" range="{{systemList}}" range-key="name">
          <view class="picker">
            <text>{{systemList[sysIdx].name}}</text>
            <image src="/imgs/down.png"></image>
          </view>
        </picker>
      </view>
    </view>
  </view>
  <view class="nav-wrapper">
    <view class="nav">
      <picker mode="date" bindchange="bindStartChange" value="{{startDate}}" start="1990-01-01" end="{{currentDate}}">
        <view class="picker">
          <text>{{startDate}}</text>
          <image src="/imgs/down.png"></image>
        </view>
      </picker>
    </view>
    <view class="nav">
      <picker mode="date" bindchange="bindEndChange" value="{{endDate}}" start="1990-01-01" end="{{currentDate}}">
        <view class="picker">
          <text>{{endDate}}</text>
          <image src="/imgs/down.png"></image>
        </view>
      </picker>
    </view>
  </view>

  <view class="task-list">
    <checkbox-group bindchange="checkboxChange">
    <block wx:for="{{submitList}}" wx:key="item">
      <view class="item-wrapper">
        <view class="task-item">
          <checkbox data-rid="{{item.id}}" value="{{item.id}}" checked="{{item.checked}}"></checkbox>
          <view class="content-wrapper" data-rid="{{item.id}}" data-isfb="{{item.is_fb}}" bindtap="viewReport">
            <view class="title">
              <text>{{item.name}}</text>
              <text wx:if="{{item.label}}" class="co1">{{item.label}}</text>
              <text wx:if="{{item.label1}}" class="co1">{{item.label1}}</text>
              <text wx:if="{{item.label2}}" class="co2">{{item.label2}}</text>
            </view>
            <view class="note">
              <text>任务生成时间：{{item.task_time}}</text>
            </view>
          </view>
        </view>
      </view>
    </block>
    </checkbox-group>
  </view>

  <view class="btn-wrapper" wx:if="{{menu == 2}}">
    <view class="btn-download" bindtap="bindSelectAll">
      <image src="/imgs/report/select.png"></image>
      <text wx:if="{{selectAll}}">全不选</text>
      <text wx:else>全选</text>
    </view>
    <view class="btn-download" bindtap="bindBatchSubmit">
      <image src="/imgs/report/submit.png"></image>
      <text>提交</text>
    </view>
    <view class="btn-cancel" bindtap="bindBatchDelete">
      <image src="/imgs/report/delete.png"></image>
      <text>删除</text>
    </view>
  </view>

  <view class="btn-wrapper" wx:if="{{menu == 3 && tab != 3}}">
    <view class="btn-download" bindtap="bindSelectAll">
      <image src="/imgs/report/select.png"></image>
      <text wx:if="{{selectAll}}">全不选</text>
      <text wx:else>全选</text>
    </view>
    <view class="btn-download" bindtap="bindBatchDownload" data-flag="1">
      <image src="/imgs/report/download.png"></image>
      <text>报告</text>
    </view>
    <view class="btn-download" bindtap="bindBatchDownload" data-flag="2">
      <image src="/imgs/report/download.png"></image>
      <text>详细报告</text>
    </view>
  </view>

  <view class="btn-wrapper" wx:if="{{menu == 4}}">
    <view class="btn-download" bindtap="bindSelectAll">
      <image src="/imgs/report/select.png"></image>
      <text wx:if="{{selectAll}}">全不选</text>
      <text wx:else>全选</text>
    </view>
    <view class="btn-download" bindtap="bindBatchDownload" data-flag="1">
      <image src="/imgs/report/download.png"></image>
      <text>报告</text>
    </view>
    <view class="btn-download" bindtap="bindBatchDownload" data-flag="2">
      <image src="/imgs/report/download.png"></image>
      <text>详细报告</text>
    </view>
    <view class="btn-download" bindtap="bindBatchDelete">
      <image src="/imgs/report/delete.png"></image>
      <text>删除</text>
    </view>
  </view>

  <view class="btn-wrapper" wx:if="{{menu == 6}}">
    <view class="btn-download" bindtap="bindSelectAll">
      <image src="/imgs/report/select.png"></image>
      <text wx:if="{{selectAll}}">全不选</text>
      <text wx:else>全选</text>
    </view>
    <view class="btn-download" bindtap="bindBatchDownload" data-flag="1">
      <image src="/imgs/report/download.png"></image>
      <text>报告</text>
    </view>
    <view class="btn-download" bindtap="bindBatchDownload" data-flag="2">
      <image src="/imgs/report/download.png"></image>
      <text>详细报告</text>
    </view>
  </view>

</view>

</view>

<view class="picker-mask" catchtouchmove="move" wx:if="{{showPicker}}">
<template is="cascaded-picker-view" data="{{ data: areaPickerData }}" />
</view>